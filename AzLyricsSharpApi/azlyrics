using System;
using System.Windows.Forms;
using System.Net.Http;
using System.Net.Http.Headers;
using System.Text.RegularExpressions;
using System.Text;

namespace httprequests
{
    public partial class Form1 : Form
    {
        public Form1()
        {
            InitializeComponent();
            try
            {
                using (var client = new HttpClient())
                {
                    var ulr = new Uri("https://www.azlyrics.com/lyrics/chrisbrown/next2you.html");
                    StringBuilder lyricsonly = new StringBuilder();
                    var url = client.GetAsync(ulr).Result;
                    //var s=ulr.AbsoluteUri.Replace(ulr.Query,"");
                    var json = url.Content.ReadAsStringAsync().Result;
                    #region stringbuilding
                    var str = Regex.Replace(json, @"<script[^>]*>[\s\S]*?</script>", string.Empty);
                    var newstr = Regex.Replace(str, "<.*?>", string.Empty);
                    //var trimmed = newstr.Trim();
                    int edited = newstr.IndexOf("Search");
                    int from = newstr.IndexOf("Submit Corrections");
                    int to = newstr.Length-1;
                    var subbed = newstr.Substring(edited, from);
                    lyricsonly.AppendLine(subbed);
                    

                    lyricsonly.Replace(",", Environment.NewLine);
                    //lyricsonly.Remove(from, to);
                    lyricsonly.Remove(0, 6);
                    lyricsonly.Replace("AZLyrics", "");
                    string v = Regex.Replace(lyricsonly.ToString(), @"\s+", "").Trim();
                    string u = lyricsonly.ToString();
                    string w =u.Trim();
                    StringBuilder x=new StringBuilder();
                    foreach (char c in lyricsonly.ToString())
                    {
                        if (!char.IsWhiteSpace(c))
                        {
                            x.Append(c);
                        }
                    }
                    string y= x.ToString();
                    #endregion
                    //var tostring = JsonConvert.SerializeObject(json);
                    mylyrics.TextAlign=HorizontalAlignment.Center;
                    mylyrics.Text=u;
                }

            }
            catch (Exception ex)
            {
                mylyrics.Text=ex.Message;

            }




            //http s://www.azlyrics.com/lyrics/taylorswift/iknewyouweretrouble.html
            //http s://jsonplaceholder.typeicode.com/posts
        }

        private void showfromhttp_Click(object sender, EventArgs e)
        {
            
        }
    }
}
